<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <!-- Need to be after the CSS -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
</head>
<body>
    <input type="file" id="file-input">
    <div id="mapid" style="width:1200px; height:800px"></div>
    <script>
        function readFile(e) {
            var file = e.target.files[0];
            if (!file) {
                return;
            }
            var reader = new FileReader();
            reader.onload = function(e) {
                var contents = e.target.result;
                createMap(JSON.parse(contents));
            };
            reader.readAsText(file);
        }

        function createMap(data) {
            console.log(data)
            var map = L.map('mapid').setView(data['center'], zoom=13);
            L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            }).addTo(map);
            console.log('RECTANGLES')
            data['rectangles'].forEach(function(polyline) {
                console.log(polyline)
                L.polygon(polyline).addTo(map)
            });
            console.log('CIRCLE')
            data['circles'].forEach(function(polyline) {
                console.log(polyline);
                L.polygon(polyline).addTo(map)
            });
        }
        document.getElementById('file-input').addEventListener('change', readFile, false);
    </script>
</body>
</html>
